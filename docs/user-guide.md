# 使用者指南

歡迎使用 ANR/Tombstone AI 分析系統！本指南將幫助您快速上手並充分利用系統功能。

## 快速開始

### 第一次使用

1. **訪問系統**
   - 開啟瀏覽器，訪問系統網址
   - 開發環境：`http://localhost:5566`
   - 生產環境：`https://your-domain.com`

2. **準備日誌檔案**
   - 確保您的日誌檔案是 `.txt` 或 `.log` 格式
   - 檔案大小不超過 20MB
   - 檔案編碼為 UTF-8

3. **上傳並分析**
   - 拖放檔案到上傳區域，或點擊選擇檔案
   - 系統會自動檢測日誌類型
   - 選擇分析模式
   - 點擊「開始分析」

## 功能詳解

### 1. 日誌類型

#### ANR (Application Not Responding)
ANR 日誌記錄了應用程式無回應時的線程狀態。

**典型特徵：**
- 包含 "DALVIK THREADS" 標記
- 顯示所有線程的堆疊追蹤
- 記錄主線程阻塞位置

**常見原因：**
- 主線程執行耗時操作
- 死鎖
- 無限循環
- I/O 阻塞

#### Tombstone (Native Crash)
Tombstone 日誌記錄了原生程式碼崩潰的詳細資訊。

**典型特徵：**
- 包含 "*** *** ***" 標記
- 顯示崩潰信號（如 SIGSEGV）
- 包含寄存器狀態和記憶體映射

**常見原因：**
- 空指針訪問
- 記憶體越界
- 堆疊溢出
- 使用已釋放的記憶體

### 2. 分析模式

#### 快速分析 (Quick)
- **用途**：快速識別關鍵問題
- **時間**：1-2 分鐘
- **適合**：緊急除錯、初步診斷
- **輸出**：簡潔的問題摘要和解決方案

#### 智能分析 (Intelligent)
- **用途**：平衡速度與深度
- **時間**：3-5 分鐘
- **適合**：日常開發、標準除錯
- **輸出**：詳細分析報告，包含程式碼建議

#### 大檔分析 (Large File)
- **用途**：處理超大日誌檔案
- **時間**：5-10 分鐘
- **適合**：複雜問題、多線程分析
- **輸出**：分段處理結果，完整覆蓋

#### 深度分析 (Max Token)
- **用途**：最詳盡的分析報告
- **時間**：10+ 分鐘
- **適合**：疑難問題、架構審查
- **輸出**：包含所有技術細節的完整報告

### 3. AI 提供者選擇

#### Anthropic Claude
- **優勢**：
  - 更大的上下文窗口（200K tokens）
  - 優秀的程式碼理解能力
  - 詳細的技術分析
- **建議場景**：
  - 複雜的多線程問題
  - 需要深入程式碼分析
  - 大型日誌檔案

#### OpenAI GPT
- **優勢**：
  - 快速響應
  - 支援函數調用
  - 廣泛的知識庫
- **建議場景**：
  - 常見問題診斷
  - 需要快速結果
  - 標準大小檔案

## 操作指南

### 上傳檔案

1. **拖放上傳**
   ```
   將檔案拖放到虛線框內
   系統會顯示檔案資訊
   ```

2. **點擊上傳**
   ```
   點擊上傳區域
   從檔案瀏覽器選擇檔案
   ```

3. **檔案驗證**
   - ✅ 支援格式：.txt, .log
   - ✅ 最大大小：20MB
   - ✅ 字符編碼：UTF-8

### 分析過程

1. **開始分析**
   - 點擊「開始分析」按鈕
   - 系統開始處理您的日誌

2. **查看進度**
   - 進度條顯示處理進度
   - 狀態訊息提供即時反饋
   - 顯示已處理的 tokens 數量

3. **取消分析**
   - 點擊「停止分析」可隨時取消
   - 已分析的部分仍會保留

### 查看結果

#### 分析報告標籤
顯示格式化的分析結果：
- **問題摘要**：簡要說明主要問題
- **詳細分析**：深入的技術分析
- **解決方案**：具體的修復建議
- **程式碼範例**：相關的程式碼片段

#### 原始輸出標籤
顯示未格式化的 AI 輸出，適合：
- 複製到其他工具
- 查看完整細節
- 除錯分析過程

#### 統計資訊標籤
顯示分析統計：
- Token 使用量圖表
- 成本分析
- 處理時間
- 模型效能指標

### 結果操作

1. **下載報告**
   ```
   點擊「下載報告」
   儲存為 .txt 檔案
   包含完整分析內容
   ```

2. **複製結果**
   ```
   點擊「複製結果」
   複製到剪貼簿
   可貼到其他應用
   ```

3. **分享結果**
   - 產生分享連結（如果啟用）
   - 匯出為 PDF（計劃中）
   - 發送到團隊協作工具

## 最佳實踐

### 1. 檔案準備

**DO：**
- ✅ 保留完整的日誌內容
- ✅ 包含時間戳記和上下文
- ✅ 使用原始日誌格式

**DON'T：**
- ❌ 截斷重要資訊
- ❌ 手動編輯日誌內容
- ❌ 混合不同類型的日誌

### 2. 模式選擇

| 情況 | 建議模式 |
|------|----------|
| 緊急除錯 | 快速分析 |
| 日常開發 | 智能分析 |
| 複雜問題 | 大檔分析 |
| 代碼審查 | 深度分析 |

### 3. 成本控制

**節省成本的技巧：**
1. 先使用快速分析進行初步診斷
2. 只對關鍵部分使用深度分析
3. 利用快取避免重複分析
4. 定期清理不需要的分析記錄

### 4. 結果解讀

**理解分析報告：**
- **紅色標記**：關鍵問題，需要立即處理
- **黃色標記**：潛在問題，建議改進
- **綠色標記**：正常或已優化的部分

**程式碼建議：**
- 直接可用的修復代碼
- 需要根據專案調整的範例
- 架構層面的改進建議

## 常見問題

### Q1: 分析失敗怎麼辦？

**可能原因：**
1. 檔案格式不正確
2. 檔案過大
3. 網路連接問題
4. API 配額用盡

**解決方法：**
1. 檢查檔案格式和大小
2. 嘗試使用較小的檔案片段
3. 檢查網路連接
4. 聯繫管理員檢查配額

### Q2: 如何提高分析準確性？

1. **提供完整日誌**
   - 包含崩潰前後的上下文
   - 保留所有線程資訊
   - 不要刪除看似無關的內容

2. **選擇合適的模式**
   - 簡單問題用快速模式
   - 複雜問題用深度模式
   - 不確定時用智能模式

3. **補充額外資訊**
   - 在日誌開頭添加版本資訊
   - 說明重現步驟
   - 提供相關配置

### Q3: 分析結果不準確？

**改進方法：**
1. 嘗試不同的分析模式
2. 切換 AI 提供者
3. 提供更多上下文資訊
4. 分段分析大型日誌

### Q4: 如何處理敏感資訊？

**安全建議：**
1. 在上傳前移除敏感資料
2. 使用私有部署版本
3. 啟用端到端加密
4. 定期清理分析歷史

## 進階功能

### 批次分析

處理多個日誌檔案：
1. 使用 API 進行批次提交
2. 設定優先級佇列
3. 自動化結果收集

### 自定義提示詞

優化特定場景的分析：
1. 編輯 prompt 模板
2. 添加專案特定上下文
3. 調整輸出格式

### 整合到 CI/CD

自動化崩潰分析：
1. 設定 Webhook 通知
2. 使用 API 自動提交
3. 整合到問題追蹤系統

## 鍵盤快捷鍵

| 快捷鍵 | 功能 |
|--------|------|
| Ctrl/Cmd + O | 開啟檔案 |
| Ctrl/Cmd + Enter | 開始分析 |
| Esc | 取消分析 |
| Ctrl/Cmd + S | 下載結果 |
| Ctrl/Cmd + C | 複製結果 |
| Tab | 切換標籤 |

## 故障排除

### 網頁無法載入
1. 檢查網址是否正確
2. 清除瀏覽器快取
3. 嘗試其他瀏覽器
4. 檢查網路連接

### 上傳失敗
1. 確認檔案格式正確
2. 檢查檔案大小
3. 確保網路穩定
4. 嘗試重新整理頁面

### 分析卡住
1. 等待 30 秒
2. 點擊取消後重試
3. 嘗試較小的檔案
4. 切換分析模式

## 獲得幫助

### 技術支援
- 📧 Email: support@anr-analyzer.com
- 💬 Slack: #anr-analyzer-support
- 📚 文檔: https://docs.anr-analyzer.com

### 回報問題
1. 提供錯誤訊息截圖
2. 說明操作步驟
3. 附上相關日誌（去除敏感資訊）
4. 說明預期結果

### 功能建議
歡迎通過以下方式提供建議：
- GitHub Issues
- 用戶反饋表單
- 社群討論區

## 更新日誌

### v1.0.0 (2025-01-15)
- 🎉 首次發布
- ✨ 支援 ANR 和 Tombstone 分析
- 🤖 整合 Anthropic 和 OpenAI
- 📊 成本估算功能
- 🔄 可取消的串流分析
- 📈 統計圖表展示

### 即將推出
- 📱 行動裝置優化
- 🌍 多語言支援
- 📤 批次上傳
- 🔍 歷史記錄搜尋
- 📊 進階分析報告